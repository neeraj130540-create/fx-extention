<fx-component [fxData]="fxData">
  <div class="custom-upload flex flex-col items-start justify-center p-0 rounded-sm">
    <div class="flex gap-8 items-center mb-2">
      <!-- <p class="text-base font-semibold">Patient Images</p> -->
      <div class="flex justify-center items-center gap-1 upload cursor-pointer"
        *ngIf="uploadedFiles.length < setting('maxFileNo')" (click)="openFileDialog()">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 29 28" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M14.001 3.00195C11.5322 3.00195 9.16722 3.86956 7.23641 5.38414L7.23598 4.59695C7.23598 4.52473 7.22175 4.45321 7.19411 4.38648C7.16647 4.31975 7.12596 4.25912 7.07489 4.20804C7.02381 4.15697 6.96318 4.11646 6.89645 4.08882C6.82972 4.06118 6.7582 4.04695 6.68598 4.04695C6.61375 4.04695 6.54223 4.06118 6.4755 4.08882C6.40877 4.11646 6.34814 4.15697 6.29707 4.20804C6.24599 4.25912 6.20548 4.31975 6.17784 4.38648C6.1502 4.45321 6.13598 4.52473 6.13598 4.59695L6.13642 6.68652C6.13643 6.83239 6.19438 6.97228 6.29752 7.07542C6.40067 7.17856 6.54055 7.23651 6.68642 7.23652H8.77598C8.8482 7.23652 8.91972 7.2223 8.98645 7.19466C9.05318 7.16702 9.11381 7.12651 9.16489 7.07543C9.21596 7.02436 9.25647 6.96373 9.28411 6.897C9.31175 6.83027 9.32598 6.75875 9.32598 6.68652C9.32598 6.6143 9.31175 6.54278 9.28411 6.47605C9.25647 6.40932 9.21596 6.34869 9.16489 6.29761C9.11381 6.24654 9.05318 6.20603 8.98645 6.17839C8.91972 6.15075 8.8482 6.13652 8.77598 6.13652H8.0584C9.7702 4.84387 11.8399 4.10195 14.001 4.10195C19.4751 4.10195 23.901 8.52782 23.901 14.002C23.901 19.4761 19.4751 23.902 14.001 23.902C8.52684 23.902 4.10098 19.4761 4.10098 14.002C4.10098 12.6381 4.38263 11.2888 4.92855 10.0389C4.98691 9.90532 4.98982 9.75399 4.93665 9.61822C4.88347 9.48246 4.77855 9.37336 4.64496 9.31492C4.57877 9.28596 4.50753 9.27032 4.4353 9.2689C4.36306 9.26747 4.29126 9.2803 4.22398 9.30663C4.15671 9.33297 4.09528 9.3723 4.04321 9.42238C3.99114 9.47247 3.94944 9.53232 3.92051 9.59852C3.31393 10.9872 3.00098 12.4866 3.00098 14.002C3.00098 20.0706 7.93236 25.002 14.001 25.002C20.0696 25.002 25.001 20.0706 25.001 14.002C25.001 7.93334 20.0696 3.00195 14.001 3.00195Z"
              fill="#F3A041" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M13.9988 6.13965C9.6616 6.13965 6.13379 9.66746 6.13379 14.0046C6.13379 18.3418 9.6616 21.8696 13.9988 21.8696C18.336 21.8696 21.8638 18.3418 21.8638 14.0046C21.8638 9.66746 18.336 6.13965 13.9988 6.13965ZM13.9988 8.22965C14.1447 8.22965 14.2846 8.28759 14.3877 8.39074C14.4908 8.49388 14.5488 8.63378 14.5488 8.77965V13.7769L17.5227 16.7508C17.6258 16.8539 17.6837 16.9938 17.6837 17.1396C17.6837 17.2855 17.6258 17.4254 17.5227 17.5285C17.4195 17.6316 17.2796 17.6896 17.1338 17.6896C16.9879 17.6896 16.8481 17.6316 16.7449 17.5285L13.6099 14.3935C13.5068 14.2904 13.4488 14.1505 13.4488 14.0046V8.77965C13.4488 8.63378 13.5067 8.49388 13.6099 8.39074C13.713 8.28759 13.8529 8.22965 13.9988 8.22965Z"
              fill="#F3A041" />
            <rect width="28.56" height="28" rx="1.51479" fill="none" />
            <path
              d="M15.068 22.7391V17.6708H18.4968L14.2108 12.6025L9.9248 17.6708H13.3536V22.7391H9.06759V22.6969C8.92358 22.7053 8.78643 22.7391 8.63899 22.7391C6.93391 22.7391 5.29866 22.0717 4.09298 20.8835C2.8873 19.6954 2.20996 18.084 2.20996 16.4037C2.20996 13.1532 4.70443 10.5042 7.90523 10.141C8.18585 8.6953 8.96892 7.39118 10.1197 6.45292C11.2706 5.51465 12.7172 5.00089 14.2108 5C15.7047 5.00082 17.1515 5.51452 18.3026 6.45277C19.4537 7.39101 20.2371 8.69516 20.5181 10.141C23.7189 10.5042 26.21 13.1532 26.21 16.4037C26.21 18.084 25.5326 19.6954 24.3269 20.8835C23.1213 22.0717 21.486 22.7391 19.7809 22.7391C19.6369 22.7391 19.4981 22.7053 19.3523 22.6969V22.7391H15.068Z"
              fill="white" />
          </svg>
        </div>
        <a type="button" class="upload_title ">
          {{ setting('upload-text') }}
        </a>
      </div>
    </div>


    <input #fileInput type="file" [multiple]="setting('multiple-upload')" (change)="onFileSelected($event)"
      accept=".csv,.pdf,.xls,.xlsx,.doc,.docx,.txt,image/*,.stl" hidden />

    <div class="file-list flex items-center gap-4 flex-wrap w-full">
      <ng-container *ngIf="uploadedFiles?.length">
        <div *ngFor="let file of uploadedFiles; let i = index"
          class="relative p-3 border rounded-lg shadow-sm bg-white w-[450px] upload_file">

          <!-- Close icon -->
          <div class="close_icon cursor-pointer absolute top-2 right-2" (click)="deleteFile(i)">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="22" height="22" rx="11" fill="#F3A041" />
              <path
                d="M7.08911 15.8889L6.11133 14.9111L10.0224 11L6.11133 7.08886L7.08911 6.11108L11.0002 10.0222L14.9113 6.11108L15.8891 7.08886L11.978 11L15.8891 14.9111L14.9113 15.8889L11.0002 11.9778L7.08911 15.8889Z"
                fill="white" />
            </svg>
          </div>

          <div class="thumbnail_title flex">
            <!-- Thumbnail on left -->
            <div class="thumbnail cursor-pointer">
              <ng-container *ngIf="file.type === 'image'; else nonImageThumb">
                <img class="file-thumbnail" [src]="file?.result" alt="preview" (click)="onImageSelect(file?.result)"
                  *ngIf="file?.result" />
                <svg *ngIf="!file?.result" width="180px" height="180px" viewBox="0 0 16 16" fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M12.7013 13H3.3127C2.58501 13 2 12.4048 2 11.6645V4.33548C2 3.59516 2.58501 3 3.3127 3H12.6871C13.4147 3 13.9998 3.59516 13.9998 4.33548V11.6645C14.014 12.4048 13.4147 13 12.7013 13ZM9.24836 7.90484L7.39347 10.0677C7.27932 10.2129 7.05102 10.2129 6.93688 10.0823L5.93809 8.99355C5.80967 8.8629 5.60991 8.8629 5.4815 8.99355L3.76929 10.8661C3.5838 11.0694 3.72648 11.4032 3.99758 11.4032H6.26626H8.13543H12.0164C12.2875 11.4032 12.4302 11.0839 12.2447 10.8806L9.71922 7.90484C9.59081 7.75968 9.37678 7.75968 9.24836 7.90484ZM6.73712 5.98871C6.25199 5.98871 5.85248 6.39516 5.85248 6.88871C5.85248 7.38226 6.25199 7.78871 6.73712 7.78871C7.22225 7.78871 7.62176 7.38226 7.62176 6.88871C7.62176 6.39516 7.22225 5.98871 6.73712 5.98871Z"
                    fill="#999999" />
                </svg>

              </ng-container>

              <ng-template #nonImageThumb>
                <div class="file-thumbnail">
                  <ng-container [ngSwitch]="file.type">



                    <svg *ngSwitchCase="'csv'" width="180px" height="180px" viewBox="0 0 16 16" fill="none"
                      xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M11.1757 1.17574C11.0632 1.06321 10.9106 1 10.7515 1H3.6C3.26863 1 3 1.26863 3 1.6V14.4C3 14.7314 3.26863 15 3.6 15H13.4C13.7314 15 14 14.7314 14 14.4V4.24853C14 4.0894 13.9368 3.93679 13.8243 3.82426L11.1757 1.17574Z"
                        fill="#F4F4F4" />
                      <path
                        d="M15 12.7C15 12.8657 14.8657 13 14.7 13H2.3C2.13431 13 2 12.8657 2 12.7V9.3C2 9.13431 2.13431 9 2.3 9H14.7C14.8657 9 15 9.13431 15 9.3V12.7Z"
                        fill="#23A761" />
                      <path d="M11 1L12.5 2.5L14 4H11.2C11.0895 4 11 3.91046 11 3.8V1Z" fill="#D9D9D9" />
                      <path
                        d="M6.94076 10.3433C6.85939 10.3433 6.78716 10.3588 6.72408 10.3899C6.66191 10.42 6.60934 10.464 6.56637 10.5216C6.52432 10.5793 6.49232 10.6489 6.47038 10.7305C6.44844 10.8122 6.43747 10.904 6.43747 11.006C6.43747 11.1435 6.45484 11.261 6.48958 11.3586C6.52523 11.4553 6.58009 11.5294 6.65414 11.5808C6.7282 11.6314 6.82373 11.6567 6.94076 11.6567C7.02212 11.6567 7.10349 11.6478 7.18486 11.6301C7.26714 11.6123 7.35628 11.587 7.45228 11.5542V11.9002C7.36359 11.9357 7.27628 11.961 7.19035 11.976C7.10441 11.992 7.00795 12 6.90099 12C6.69437 12 6.52432 11.9587 6.39084 11.8762C6.25827 11.7929 6.15999 11.6766 6.096 11.5276C6.032 11.3777 6 11.2029 6 11.0033C6 10.8561 6.02057 10.7212 6.06171 10.5988C6.10285 10.4764 6.16319 10.3704 6.24273 10.2808C6.32227 10.1912 6.42055 10.122 6.53758 10.0732C6.6546 10.0244 6.78899 10 6.94076 10C7.04041 10 7.14006 10.0124 7.23971 10.0373C7.34028 10.0612 7.43628 10.0945 7.5277 10.1371L7.39057 10.4724C7.3156 10.4378 7.24017 10.4076 7.16429 10.3819C7.08841 10.3562 7.0139 10.3433 6.94076 10.3433Z"
                        fill="white" />
                      <path
                        d="M9.06363 11.4331C9.06363 11.5485 9.03483 11.6487 8.97724 11.7339C8.91964 11.819 8.83553 11.8847 8.7249 11.9308C8.61519 11.9769 8.48172 12 8.32447 12C8.25498 12 8.18687 11.9956 8.12013 11.9867C8.05431 11.9778 7.99077 11.965 7.92951 11.9481C7.86917 11.9304 7.81157 11.9086 7.75672 11.8829V11.4997C7.8518 11.5405 7.95054 11.5773 8.05293 11.6101C8.15533 11.6429 8.25681 11.6593 8.35738 11.6593C8.42686 11.6593 8.48263 11.6505 8.52468 11.6327C8.56765 11.615 8.59874 11.5906 8.61794 11.5595C8.63714 11.5285 8.64674 11.493 8.64674 11.4531C8.64674 11.4043 8.62982 11.3626 8.596 11.328C8.56217 11.2934 8.51554 11.261 8.45612 11.2309C8.3976 11.2007 8.33132 11.1683 8.25727 11.1337C8.21064 11.1124 8.1599 11.0867 8.10505 11.0566C8.05019 11.0255 7.99808 10.9878 7.94871 10.9434C7.89934 10.8991 7.85866 10.8454 7.82666 10.7824C7.79558 10.7186 7.78003 10.6423 7.78003 10.5536C7.78003 10.4373 7.80746 10.338 7.86231 10.2555C7.91717 10.173 7.99534 10.11 8.09682 10.0665C8.19921 10.0222 8.31989 10 8.45886 10C8.56308 10 8.66228 10.012 8.75645 10.0359C8.85153 10.059 8.95072 10.0927 9.05403 10.1371L8.9169 10.4578C8.82456 10.4214 8.74182 10.3934 8.66868 10.3739C8.59554 10.3535 8.52103 10.3433 8.44515 10.3433C8.39212 10.3433 8.34686 10.3517 8.30938 10.3686C8.2719 10.3846 8.24355 10.4076 8.22436 10.4378C8.20516 10.4671 8.19556 10.5012 8.19556 10.5403C8.19556 10.5864 8.20927 10.6254 8.2367 10.6574C8.26504 10.6884 8.30709 10.7186 8.36286 10.7478C8.41955 10.7771 8.48994 10.8113 8.57405 10.8503C8.67645 10.8973 8.76376 10.9466 8.83598 10.998C8.90912 11.0486 8.96535 11.1084 9.00466 11.1776C9.04398 11.246 9.06363 11.3311 9.06363 11.4331Z"
                        fill="white" />
                      <path
                        d="M11 10.0279L10.3184 11.9734H9.85491L9.17471 10.0279H9.60395L9.98108 11.1856C9.98748 11.2051 9.99799 11.242 10.0126 11.2961C10.0272 11.3493 10.0419 11.4061 10.0565 11.4664C10.072 11.5258 10.0826 11.5751 10.088 11.6141C10.0935 11.5751 10.1031 11.5258 10.1168 11.4664C10.1315 11.407 10.1456 11.3506 10.1594 11.2974C10.174 11.2433 10.1845 11.206 10.1909 11.1856L10.5708 10.0279H11Z"
                        fill="white" />
                      <rect x="5" y="7" width="3" height="1" rx="0.2" fill="#CCCCCC" />
                      <rect x="5" y="5" width="3" height="1" rx="0.2" fill="#CCCCCC" />
                      <rect x="9" y="7" width="3" height="1" rx="0.2" fill="#CCCCCC" />
                      <rect x="9" y="5" width="3" height="1" rx="0.2" fill="#CCCCCC" />
                    </svg>

                    <svg *ngSwitchCase="'text'" width="180px" height="180px" viewBox="0 0 16 16" fill="none"
                      xmlns="http://www.w3.org/2000/svg" (click)="onFileClick(file,file?.name)">
                      <path
                        d="M11.1757 1.17574C11.0632 1.06321 10.9106 1 10.7515 1H3.6C3.26863 1 3 1.26863 3 1.6V14.4C3 14.7314 3.26863 15 3.6 15H13.4C13.7314 15 14 14.7314 14 14.4V4.24853C14 4.0894 13.9368 3.93679 13.8243 3.82426L11.1757 1.17574Z"
                        fill="#F4F4F4" />
                      <path
                        d="M15 12.7C15 12.8657 14.8657 13 14.7 13H2.3C2.13431 13 2 12.8657 2 12.7V9.3C2 9.13431 2.13431 9 2.3 9H14.7C14.8657 9 15 9.13431 15 9.3V12.7Z"
                        fill="#1F5EBB" />
                      <path d="M11 1L12.5 2.5L14 4H11.2C11.0895 4 11 3.91046 11 3.8V1Z" fill="#D9D9D9" />
                      <path
                        d="M7.04353 12H6.61105V10.3203H6.0572V9.96038H7.59738V10.3203H7.04353V12ZM9.56027 12H9.06641L8.59208 11.2285L8.11775 12H7.65458L8.33119 10.9481L7.69782 9.96038H8.17494L8.6144 10.6942L9.04548 9.96038H9.51144L8.87109 10.9718L9.56027 12ZM10.6038 12H10.1713V10.3203H9.61747V9.96038H11.1576V10.3203H10.6038V12Z"
                        fill="white" />
                      <rect x="5" y="5" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                      <rect x="5" y="6" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                      <rect x="5" y="7" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                    </svg>

                    <svg *ngSwitchCase="'pdf'" width="180px" height="180px" viewBox="0 0 16 16" fill="none"
                      xmlns="http://www.w3.org/2000/svg" (click)="onFileClick(file,file?.name)">
                      <path
                        d="M11.1757 1.17574C11.0632 1.06321 10.9106 1 10.7515 1H3.6C3.26863 1 3 1.26863 3 1.6V14.4C3 14.7314 3.26863 15 3.6 15H13.4C13.7314 15 14 14.7314 14 14.4V4.24853C14 4.0894 13.9368 3.93679 13.8243 3.82426L11.1757 1.17574Z"
                        fill="#F4F4F4" />
                      <path
                        d="M15 12.7C15 12.8657 14.8657 13 14.7 13H2.3C2.13431 13 2 12.8657 2 12.7V9.3C2 9.13431 2.13431 9 2.3 9H14.7C14.8657 9 15 9.13431 15 9.3V12.7Z"
                        fill="#DD2025" />
                      <path d="M11 1L12.5 2.5L14 4H11.2C11.0895 4 11 3.91046 11 3.8V1Z" fill="#D9D9D9" />
                      <path
                        d="M6.6084 9.96038C6.87161 9.96038 7.06366 10.0171 7.18457 10.1306C7.30548 10.2431 7.36593 10.3984 7.36593 10.5965C7.36593 10.6858 7.35245 10.7714 7.32547 10.8532C7.2985 10.9342 7.25432 11.0062 7.19294 11.0695C7.13249 11.1327 7.05157 11.1829 6.9502 11.2201C6.84882 11.2564 6.72373 11.2746 6.57492 11.2746H6.38937V12H5.95689V9.96038H6.6084ZM6.58608 10.3147H6.38937V10.9202H6.53167C6.61258 10.9202 6.6828 10.9095 6.74233 10.8881C6.80185 10.8667 6.84789 10.8332 6.88044 10.7877C6.91299 10.7421 6.92927 10.6835 6.92927 10.6119C6.92927 10.5114 6.90137 10.437 6.84556 10.3887C6.78976 10.3394 6.70326 10.3147 6.58608 10.3147ZM9.44322 10.9607C9.44322 11.1904 9.39904 11.3824 9.31069 11.5368C9.22326 11.6903 9.09631 11.8061 8.92983 11.8842C8.76335 11.9614 8.56292 12 8.32854 12H7.75098V9.96038H8.39132C8.60524 9.96038 8.79078 9.99851 8.94796 10.0748C9.10514 10.1501 9.22698 10.2622 9.31348 10.411C9.39997 10.5589 9.44322 10.7421 9.44322 10.9607ZM8.994 10.9718C8.994 10.8211 8.97168 10.6975 8.92704 10.6007C8.88332 10.5031 8.81822 10.431 8.73172 10.3845C8.64616 10.338 8.54013 10.3147 8.41364 10.3147H8.18345V11.6429H8.369C8.58012 11.6429 8.73684 11.5866 8.83915 11.4741C8.94238 11.3615 8.994 11.1941 8.994 10.9718ZM10.2914 12H9.86593V9.96038H11.035V10.3147H10.2914V10.8407H10.9834V11.1936H10.2914V12Z"
                        fill="white" />
                      <rect x="5" y="5" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                      <rect x="5" y="6" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                      <rect x="5" y="7" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                    </svg>

                    <svg *ngSwitchCase="'stl'" (click)="onOpenSTLFile(file)" width="180px" height="180"
                      viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M11.1757 1.17574C11.0632 1.06321 10.9106 1 10.7515 1H3.6C3.26863 1 3 1.26863 3 1.6V14.4C3 14.7314 3.26863 15 3.6 15H13.4C13.7314 15 14 14.7314 14 14.4V4.24853C14 4.0894 13.9368 3.93679 13.8243 3.82426L11.1757 1.17574Z"
                        fill="#F4F4F4" />
                      <path
                        d="M15 12.7C15 12.8657 14.8657 13 14.7 13H2.3C2.13431 13 2 12.8657 2 12.7V9.3C2 9.13431 2.13431 9 2.3 9H14.7C14.8657 9 15 9.13431 15 9.3V12.7Z"
                        fill="#F3A041" />
                      <path d="M11 1L12.5 2.5L14 4H11.2C11.0895 4 11 3.91046 11 3.8V1Z" fill="#D9D9D9" />
                      <path
                        d="M7.17881 10.561C7.16954 10.4781 7.13048 10.4135 7.06162 10.3673C6.99343 10.3212 6.90471 10.2981 6.79547 10.2981C6.71867 10.2981 6.6528 10.3091 6.59784 10.3313C6.54289 10.3534 6.50085 10.3835 6.47172 10.4215C6.44259 10.4594 6.42769 10.5028 6.42703 10.5515C6.42703 10.592 6.43663 10.6271 6.45583 10.6569C6.47569 10.6866 6.50251 10.7119 6.53627 10.7328C6.57004 10.753 6.60744 10.7701 6.64849 10.7841C6.68954 10.798 6.73092 10.8097 6.77263 10.8192L6.9633 10.8647C7.0401 10.8818 7.11392 10.9049 7.18477 10.934C7.25627 10.9631 7.32016 10.9998 7.37643 11.0441C7.43337 11.0884 7.47839 11.1419 7.5115 11.2046C7.5446 11.2672 7.56115 11.3406 7.56115 11.4248C7.56115 11.5387 7.5307 11.639 7.46979 11.7257C7.40888 11.8117 7.32082 11.8791 7.20562 11.9279C7.09108 11.976 6.95238 12 6.78951 12C6.63128 12 6.4939 11.9766 6.37738 11.9298C6.26152 11.8829 6.17081 11.8146 6.10527 11.7247C6.04039 11.6349 6.0053 11.5254 6 11.3963H6.36248C6.36778 11.464 6.38963 11.5203 6.42803 11.5653C6.46643 11.6102 6.51641 11.6437 6.57798 11.6659C6.64022 11.688 6.70973 11.6991 6.78653 11.6991C6.86664 11.6991 6.93682 11.6877 6.99707 11.6649C7.05798 11.6415 7.10565 11.6092 7.14008 11.5681C7.1745 11.5263 7.19205 11.4776 7.19271 11.4219C7.19205 11.3713 7.17649 11.3295 7.14604 11.2966C7.11558 11.2631 7.07288 11.2352 7.01793 11.2131C6.96364 11.1903 6.90008 11.1701 6.82725 11.1523L6.59586 11.0954C6.42836 11.0543 6.29594 10.9919 6.19862 10.9084C6.10196 10.8242 6.05363 10.7125 6.05363 10.5733C6.05363 10.4588 6.08607 10.3585 6.15095 10.2724C6.2165 10.1864 6.30554 10.1196 6.41809 10.0721C6.53065 10.024 6.65809 10 6.80044 10C6.94477 10 7.07122 10.024 7.1798 10.0721C7.28904 10.1196 7.37478 10.1857 7.43701 10.2705C7.49925 10.3547 7.53136 10.4515 7.53334 10.561H7.17881Z"
                        fill="white" />
                      <path d="M7.80024 10.3218V10.0266H9.42296V10.3218H8.79433V11.9706H8.42887V10.3218H7.80024Z"
                        fill="white" />
                      <path d="M9.73579 11.9706V10.0266H10.1042V11.6754H11V11.9706H9.73579Z" fill="white" />
                      <mask id="mask0_8011_7505" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="6" y="3"
                        width="5" height="5">
                        <rect x="6" y="3" width="5" height="5" fill="#D9D9D9" />
                      </mask>
                      <g mask="url(#mask0_8011_7505)">
                        <path
                          d="M8.22222 7.35625V5.64375L6.55556 4.775V6.4875L8.22222 7.35625ZM8.77778 7.35625L10.4444 6.4875V4.775L8.77778 5.64375V7.35625ZM8.5 5.2125L10.1458 4.35625L8.5 3.5L6.85417 4.35625L8.5 5.2125ZM6.27778 6.925C6.18981 6.87917 6.12153 6.81875 6.07292 6.74375C6.02431 6.66875 6 6.58542 6 6.49375V4.50625C6 4.41458 6.02431 4.33125 6.07292 4.25625C6.12153 4.18125 6.18981 4.12083 6.27778 4.075L8.22222 3.06875C8.31019 3.02292 8.40278 3 8.5 3C8.59722 3 8.68981 3.02292 8.77778 3.06875L10.7222 4.075C10.8102 4.12083 10.8785 4.18125 10.9271 4.25625C10.9757 4.33125 11 4.41458 11 4.50625V6.49375C11 6.58542 10.9757 6.66875 10.9271 6.74375C10.8785 6.81875 10.8102 6.87917 10.7222 6.925L8.77778 7.93125C8.68981 7.97708 8.59722 8 8.5 8C8.40278 8 8.31019 7.97708 8.22222 7.93125L6.27778 6.925Z"
                          fill="#CCCCCC" />
                      </g>
                    </svg>

                    <svg *ngSwitchCase="'word'" width="180px" height="180px" viewBox="0 0 16 16" fill="none"
                      xmlns="http://www.w3.org/2000/svg" (click)="onFileClick(file,file?.name)">
                      <path
                        d="M11.1757 1.17574C11.0632 1.06321 10.9106 1 10.7515 1H3.6C3.26863 1 3 1.26863 3 1.6V14.4C3 14.7314 3.26863 15 3.6 15H13.4C13.7314 15 14 14.7314 14 14.4V4.24853C14 4.0894 13.9368 3.93679 13.8243 3.82426L11.1757 1.17574Z"
                        fill="#F4F4F4" />
                      <path
                        d="M15 12.7C15 12.8657 14.8657 13 14.7 13H2.3C2.13431 13 2 12.8657 2 12.7V9.3C2 9.13431 2.13431 9 2.3 9H14.7C14.8657 9 15 9.13431 15 9.3V12.7Z"
                        fill="#1F5EBB" />
                      <path d="M11 1L12.5 2.5L14 4H11.2C11.0895 4 11 3.91046 11 3.8V1Z" fill="#D9D9D9" />
                      <path
                        d="M7.04353 12H6.61105V10.3203H6.0572V9.96038H7.59738V10.3203H7.04353V12ZM9.56027 12H9.06641L8.59208 11.2285L8.11775 12H7.65458L8.33119 10.9481L7.69782 9.96038H8.17494L8.6144 10.6942L9.04548 9.96038H9.51144L8.87109 10.9718L9.56027 12ZM10.6038 12H10.1713V10.3203H9.61747V9.96038H11.1576V10.3203H10.6038V12Z"
                        fill="white" />
                      <rect x="5" y="5" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                      <rect x="5" y="6" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                      <rect x="5" y="7" width="7" height="0.5" rx="0.25" fill="#CCCCCC" />
                    </svg>


                    

                    <svg *ngSwitchDefault width="180px" height="180px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.7013 13H3.3127C2.58501 13 2 12.4048 2 11.6645V4.33548C2 3.59516 2.58501 3 3.3127 3H12.6871C13.4147 3 13.9998 3.59516 13.9998 4.33548V11.6645C14.014 12.4048 13.4147 13 12.7013 13ZM9.24836 7.90484L7.39347 10.0677C7.27932 10.2129 7.05102 10.2129 6.93688 10.0823L5.93809 8.99355C5.80967 8.8629 5.60991 8.8629 5.4815 8.99355L3.76929 10.8661C3.5838 11.0694 3.72648 11.4032 3.99758 11.4032H6.26626H8.13543H12.0164C12.2875 11.4032 12.4302 11.0839 12.2447 10.8806L9.71922 7.90484C9.59081 7.75968 9.37678 7.75968 9.24836 7.90484ZM6.73712 5.98871C6.25199 5.98871 5.85248 6.39516 5.85248 6.88871C5.85248 7.38226 6.25199 7.78871 6.73712 7.78871C7.22225 7.78871 7.62176 7.38226 7.62176 6.88871C7.62176 6.39516 7.22225 5.98871 6.73712 5.98871Z" fill="#999999"/>
</svg>

                  </ng-container>
                </div>
              </ng-template>
            </div>

            <!-- Metadata on right -->
            <div class="title_notes ml-2">
              <!-- Title -->
              <div class="input-container">
                <label class="font-semibold text-sm input-title m-0 -mt-1">Title</label>
                <input [(ngModel)]="file.title" name="title{{i}}" (ngModelChange)="onMetaChange()"
                  placeholder="Enter title" class=" rounded px-3 py-2 mb-3 w-full outline-none focus:ring" required
                  #titleCtrl="ngModel" />
                <div *ngIf="titleCtrl.invalid" class="text-red-500 text-xs mb-2">
                  Title is required
                </div>

              </div>
              <!-- Notes -->
              <div class="input-container">
                <label class="font-semibold text-sm input-title m-0 -mt-1">Notes</label>
                <textarea [(ngModel)]="file.notes" name="notes{{i}}" (ngModelChange)="onMetaChange()"
                  placeholder="Enter notes" class=" rounded px-3 py-2 mb-0 w-full outline-none focus:ring" rows="2"
                  required #notesCtrl="ngModel"></textarea>
                <div *ngIf="notesCtrl.invalid" class="text-red-500 text-xs mt-1">
                  Notes are required
                </div>
              </div>

            </div>

          </div>
          <div class="category mt-2">
            <!-- Category -->
            <div class="input-container">
              <label class="font-semibold text-sm input-title m-0">Category</label>
              <select [(ngModel)]="file.categoryId " name="category{{i}}" (ngModelChange)="onMetaChange()"
                class=" rounded px-3 py-2 w-full outline-none focus:ring" required #categoryCtrl="ngModel">
                <option value="">Select Category</option>
                <option *ngFor="let c of categories" [ngValue]="c.value">{{ c.label }}</option>
              </select>
            </div>
            <div *ngIf="categoryCtrl.invalid" class="text-red-500 text-xs mt-1">
              Category is required
            </div>
          </div>
        </div>
      </ng-container>
    </div>



  </div>

  <!-- Image Preview Dialog -->
  <p-dialog header="Image Preview" [modal]="true" [draggable]="false" [(visible)]="visible" [style]="{width: '70rem'}"
    class="customDialogClass" (onHide)="closeDialog()">
    <img [src]="selecteImageUrl" />
  </p-dialog>

    <!-- Document Preview Dialog -->
  <p-dialog header="Document Preview" [modal]="true" [draggable]="false" [(visible)]="fileVisible"
    [style]="{width: '70rem'}" class="customDialogClass" (onHide)="closeFileDialog()">
    <div *ngIf="fileUrl && fileType !== 'unsupported'; else unsupportedMsg" class="border rounded shadow-sm">
      <iframe [src]="fileUrl" width="100%" height="600" style="border: none;" allowfullscreen>
      </iframe>
    </div>

    <ng-template #unsupportedMsg>
      <p class="text-red-600 mt-3" *ngIf="fileType === 'unsupported'">
        Unsupported file type. Please upload a PDF, DOCX, XLSX, or PPTX file.
      </p>
    </ng-template>
  </p-dialog>

  <!-- STL File Preview Dialog -->
   <ng-container *ngIf="stlFileUpload">
  <p-dialog header="STL File Preview" [modal]="true" [draggable]="false" [(visible)]="stlFileVisible" [style]="{width: '70rem'}"
    class="customDialogClass" (onHide)="closeStlDialog()">
    <app-three-viewer [manualFileUpload]="stlFileUpload"></app-three-viewer>
  </p-dialog>
   </ng-container>
  <p-toast [preventOpenDuplicates]="true" [breakpoints]="{ '426px': { width: '90%' } }" position="top-center"></p-toast>

</fx-component>